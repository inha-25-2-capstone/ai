# LLM ìë™ ë¼ë²¨ë§ ê°€ì´ë“œ

ChatGPT APIì™€ Gemini APIë¥¼ í™œìš©í•˜ì—¬ 6000ê°œ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë¼ë²¨ë§í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ì¤€ë¹„ ì‚¬í•­](#1-ì¤€ë¹„-ì‚¬í•­)
2. [API í‚¤ ë°œê¸‰](#2-api-í‚¤-ë°œê¸‰)
3. [ìë™ ë¼ë²¨ë§ ì‹¤í–‰](#3-ìë™-ë¼ë²¨ë§-ì‹¤í–‰)
4. [ê²€ìˆ˜ í”„ë¡œì„¸ìŠ¤](#4-ê²€ìˆ˜-í”„ë¡œì„¸ìŠ¤)
5. [ë¹„ìš© ë° ì‹œê°„ ì˜ˆìƒ](#5-ë¹„ìš©-ë°-ì‹œê°„-ì˜ˆìƒ)

---

## 1. ì¤€ë¹„ ì‚¬í•­

### 1.1 íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

í•„ìš”í•œ íŒ¨í‚¤ì§€:
- `openai` (ChatGPT API)
- `google-generativeai` (Gemini API)
- `pandas`, `tqdm`

### 1.2 ë°ì´í„° ì¤€ë¹„

ë¼ë²¨ë§í•  ë‰´ìŠ¤ ë°ì´í„°ë¥¼ CSV í˜•ì‹ìœ¼ë¡œ ì¤€ë¹„í•˜ì„¸ìš”.

**í•„ìˆ˜ ì»¬ëŸ¼:**
- `text`: ë‰´ìŠ¤ ê¸°ì‚¬ ë³¸ë¬¸

**CSV ì˜ˆì‹œ:**
```csv
text,source,date,topic
"ì •ë¶€ê°€ ìƒˆë¡œìš´ ì •ì±…ì„ ë°œí‘œí–ˆë‹¤...",ì¡°ì„ ì¼ë³´,2024-01-15,ë¶€ë™ì‚°ì •ì±…
"ì´ë²ˆ ì¡°ì¹˜ëŠ” ê²½ì œ ì„±ì¥ì— ê¸°ì—¬í•  ê²ƒìœ¼ë¡œ...",í•œê²¨ë ˆ,2024-01-16,ê²½ì œì •ì±…
```

---

## 2. API í‚¤ ë°œê¸‰

### 2.1 OpenAI (ChatGPT) API í‚¤

1. https://platform.openai.com/account/api-keys ë°©ë¬¸
2. "Create new secret key" í´ë¦­
3. API í‚¤ ë³µì‚¬ (ì˜ˆ: `sk-...`)

**ë¹„ìš©:**
- **gpt-4o-mini** (ê¶Œì¥)
  - Input: $0.15 / 1M tokens
  - Output: $0.6 / 1M tokens
  - 6000ê°œ ë¼ë²¨ë§ ì˜ˆìƒ: **ì•½ $5-10**

### 2.2 Google Gemini API í‚¤

1. https://aistudio.google.com/app/apikey ë°©ë¬¸
2. "Create API key" í´ë¦­
3. API í‚¤ ë³µì‚¬

**ë¹„ìš©:**
- **Gemini 1.5 Flash** (ê¶Œì¥)
  - Input: $0.075 / 1M tokens
  - Output: $0.3 / 1M tokens
  - 6000ê°œ ë¼ë²¨ë§ ì˜ˆìƒ: **ì•½ $2-5**

**ë¬´ë£Œ í• ë‹¹ëŸ‰:**
- ë¶„ë‹¹ 15íšŒ ìš”ì²­
- ì¼ì¼ 1,500íšŒ ìš”ì²­
- ì´ˆê¸° í…ŒìŠ¤íŠ¸ì— ì¶©ë¶„!

---

## 3. ìë™ ë¼ë²¨ë§ ì‹¤í–‰

### 3.1 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì†Œê·œëª¨)

ë¨¼ì € 10ê°œ ìƒ˜í”Œë¡œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:

#### ChatGPT ì‚¬ìš©
```bash
python scripts/auto_labeling.py \
  --input data/unlabeled_news.csv \
  --output data/labeled_test.csv \
  --provider openai \
  --openai-key sk-YOUR_KEY_HERE \
  --sample 10
```

#### Gemini ì‚¬ìš©
```bash
python scripts/auto_labeling.py \
  --input data/unlabeled_news.csv \
  --output data/labeled_test.csv \
  --provider gemini \
  --gemini-key YOUR_GEMINI_KEY \
  --sample 10
```

#### ë‘ API êµì°¨ ê²€ì¦ (ê¶Œì¥)
```bash
python scripts/auto_labeling.py \
  --input data/unlabeled_news.csv \
  --output data/labeled_test.csv \
  --provider both \
  --openai-key sk-YOUR_KEY \
  --gemini-key YOUR_GEMINI_KEY \
  --sample 10
```

### 3.2 ì „ì²´ ë°ì´í„° ë¼ë²¨ë§ (6000ê°œ)

í…ŒìŠ¤íŠ¸ ì„±ê³µ í›„ ì „ì²´ ì‹¤í–‰:

```bash
python scripts/auto_labeling.py \
  --input data/unlabeled_news_6000.csv \
  --output data/auto_labeled_6000.csv \
  --provider gemini \
  --gemini-key YOUR_GEMINI_KEY \
  --save-interval 100
```

**ì˜µì…˜ ì„¤ëª…:**
- `--provider`: API ì„ íƒ (`openai`, `gemini`, `both`)
- `--save-interval`: ì¤‘ê°„ ì €ì¥ ê°„ê²© (100ê°œë§ˆë‹¤ ì €ì¥)
- `--openai-model`: OpenAI ëª¨ë¸ (ê¸°ë³¸: `gpt-4o-mini`)
- `--gemini-model`: Gemini ëª¨ë¸ (ê¸°ë³¸: `gemini-1.5-flash`)

### 3.3 ì‹¤í–‰ ì‹œê°„ ì˜ˆìƒ

| ìƒ˜í”Œ ìˆ˜ | API | ì˜ˆìƒ ì‹œê°„ |
|---------|-----|----------|
| 100ê°œ | Gemini | ì•½ 1-2ë¶„ |
| 1000ê°œ | Gemini | ì•½ 10-15ë¶„ |
| 6000ê°œ | Gemini | ì•½ 1ì‹œê°„ |
| 6000ê°œ | Both | ì•½ 2ì‹œê°„ |

**ì°¸ê³ :** API Rate Limit ê³ ë ¤í•˜ì—¬ 0.5ì´ˆ ë”œë ˆì´ ì ìš©

---

## 4. ê²€ìˆ˜ í”„ë¡œì„¸ìŠ¤

### 4.1 ìë™ ë¼ë²¨ë§ ê²°ê³¼ í™•ì¸

ë¼ë²¨ë§ì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤:

```csv
text,label,confidence,agreement,providers,reasons
"...",0,0.85,True,"gemini","ê¸ì •ì  í‰ê°€ê°€ ì£¼ë¥¼ ì´ë£¸"
"...",1,0.92,True,"openai,gemini","ì‚¬ì‹¤ë§Œ ì „ë‹¬"
"...",2,0.65,False,"openai,gemini","ì¼ë¶€ ë¹„íŒì  í‘œí˜„"
```

- `label`: 0(ì˜¹í˜¸), 1(ì¤‘ë¦½), 2(ë¹„íŒ)
- `confidence`: ì‹ ë¢°ë„ (0.0~1.0)
- `agreement`: ì—¬ëŸ¬ API ì‚¬ìš© ì‹œ ì¼ì¹˜ ì—¬ë¶€
- `providers`: ì‚¬ìš©í•œ API
- `reasons`: íŒë‹¨ ê·¼ê±°

### 4.2 ê²€ìˆ˜ ëŒ€ìƒ ì„ ì • ì „ëµ

**ì „ì²´ 6000ê°œë¥¼ ëª¨ë‘ ê²€ìˆ˜í•  í•„ìš” ì—†ìŒ!**

#### ì˜µì…˜ 1: ì‹ ë¢°ë„ ê¸°ë°˜ ê²€ìˆ˜ (ê¶Œì¥)
ì‹ ë¢°ë„ê°€ ë‚®ì€ ìƒ˜í”Œë§Œ ê²€ìˆ˜:

```bash
python scripts/review_labels.py \
  --input data/auto_labeled_6000.csv \
  --output data/reviewed.csv \
  --low-confidence \
  --confidence-threshold 0.7
```

**ì˜ˆìƒ:** ì•½ 10-20% (600-1200ê°œ) ê²€ìˆ˜ í•„ìš”

#### ì˜µì…˜ 2: API ë¶ˆì¼ì¹˜ ìƒ˜í”Œ ê²€ìˆ˜
ë‘ APIê°€ ë‹¤ë¥´ê²Œ ë¼ë²¨ë§í•œ ìƒ˜í”Œë§Œ ê²€ìˆ˜:

```bash
python scripts/review_labels.py \
  --input data/auto_labeled_6000.csv \
  --output data/reviewed.csv \
  --disagreement
```

**ì˜ˆìƒ:** ì•½ 5-15% (300-900ê°œ) ê²€ìˆ˜ í•„ìš”

#### ì˜µì…˜ 3: ë¬´ì‘ìœ„ ìƒ˜í”Œë§ ê²€ìˆ˜
ì „ì²´ì—ì„œ ë¬´ì‘ìœ„ 300ê°œë§Œ ê²€ìˆ˜:

```bash
python scripts/review_labels.py \
  --input data/auto_labeled_6000.csv \
  --output data/reviewed.csv \
  --random 300
```

#### ì˜µì…˜ 4: ì¡°í•© ì „ëµ (ìµœì )
1. ì‹ ë¢°ë„ < 0.6: ë°˜ë“œì‹œ ê²€ìˆ˜
2. ì‹ ë¢°ë„ 0.6-0.8: ë¬´ì‘ìœ„ 30% ê²€ìˆ˜
3. ì‹ ë¢°ë„ > 0.8: ë¬´ì‘ìœ„ 5% ê²€ìˆ˜

### 4.3 ëŒ€í™”í˜• ê²€ìˆ˜

ê²€ìˆ˜ ë„êµ¬ ì‹¤í–‰ ì‹œ:

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ìƒ˜í”Œ 1/500
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
í…ìŠ¤íŠ¸: ì •ë¶€ì˜ ì •ì±…ì€ ê²½ì œ ì„±ì¥ì— ê¸°ì—¬í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤...

í˜„ì¬ ë ˆì´ë¸”: 0 (ì˜¹í˜¸)
ì‹ ë¢°ë„: 0.65
ê·¼ê±°: ê¸ì •ì  ì „ë§ ì œì‹œ

ê²°ì • [0/1/2/k/s/d/q]:
```

**ëª…ë ¹ì–´:**
- `0`, `1`, `2`: ë ˆì´ë¸” ë³€ê²½
- `k`: í˜„ì¬ ë ˆì´ë¸” ìœ ì§€ (keep)
- `s`: ê±´ë„ˆë›°ê¸° (skip)
- `d`: ì‚­ì œ í‘œì‹œ (delete)
- `q`: ì¢…ë£Œ (quit)

### 4.4 ê²€ìˆ˜ ì‹œê°„ ì˜ˆìƒ

| ê²€ìˆ˜ ê°œìˆ˜ | ì˜ˆìƒ ì‹œê°„ | ì‘ì—…ì |
|----------|----------|--------|
| 300ê°œ | 2-3ì‹œê°„ | 1ëª… |
| 600ê°œ | 4-6ì‹œê°„ | 1ëª… or 2-3ì‹œê°„ (2ëª…) |
| 1000ê°œ | 7-10ì‹œê°„ | 2-3ëª… ë¶„ë‹´ |

**íŒ:** íŒ€ì› 2-3ëª…ì´ ë‚˜ëˆ ì„œ ê²€ìˆ˜í•˜ë©´ í•˜ë£¨ ì•ˆì— ì™„ë£Œ ê°€ëŠ¥!

---

## 5. ë¹„ìš© ë° ì‹œê°„ ì˜ˆìƒ

### 5.1 ë¹„ìš© ë¹„êµ

| ë°©ë²• | ì‹œê°„ | ë¹„ìš© | í’ˆì§ˆ |
|------|------|------|------|
| **ìˆ˜ë™ ë¼ë²¨ë§** | 30-40ì‹œê°„ | ë¬´ë£Œ (ë…¸ë™ë ¥) | ë†’ìŒ |
| **Gemini ìë™ + ê²€ìˆ˜** | 2-3ì‹œê°„ | $2-5 | ë†’ìŒ |
| **ChatGPT ìë™ + ê²€ìˆ˜** | 2-3ì‹œê°„ | $5-10 | ë§¤ìš° ë†’ìŒ |
| **Both êµì°¨ ê²€ì¦ + ê²€ìˆ˜** | 3-4ì‹œê°„ | $7-15 | ìµœê³  |

### 5.2 ê¶Œì¥ ì „ëµ

#### ì˜ˆì‚° ìµœì†Œí™” ì „ëµ
```bash
# 1ë‹¨ê³„: Geminië¡œ ì „ì²´ ë¼ë²¨ë§ (ë¬´ë£Œ í• ë‹¹ëŸ‰ í™œìš©)
python scripts/auto_labeling.py \
  --input data/unlabeled_6000.csv \
  --output data/labeled_gemini.csv \
  --provider gemini \
  --gemini-key YOUR_KEY

# 2ë‹¨ê³„: ì‹ ë¢°ë„ ë‚®ì€ ê²ƒë§Œ ê²€ìˆ˜ (ì•½ 500ê°œ)
python scripts/review_labels.py \
  --input data/labeled_gemini.csv \
  --output data/final_labeled.csv \
  --low-confidence --confidence-threshold 0.7
```

**ì´ ë¹„ìš©:** $0-3 (Gemini ë¬´ë£Œ í• ë‹¹ëŸ‰ ë‚´)
**ì´ ì‹œê°„:** 3-4ì‹œê°„

#### í’ˆì§ˆ ìµœëŒ€í™” ì „ëµ
```bash
# 1ë‹¨ê³„: ë‘ APIë¡œ êµì°¨ ê²€ì¦
python scripts/auto_labeling.py \
  --input data/unlabeled_6000.csv \
  --output data/labeled_both.csv \
  --provider both \
  --openai-key YOUR_OPENAI_KEY \
  --gemini-key YOUR_GEMINI_KEY

# 2ë‹¨ê³„: ë¶ˆì¼ì¹˜ ìƒ˜í”Œ ê²€ìˆ˜ (ì•½ 300-500ê°œ)
python scripts/review_labels.py \
  --input data/labeled_both.csv \
  --output data/final_labeled.csv \
  --disagreement
```

**ì´ ë¹„ìš©:** $7-15
**ì´ ì‹œê°„:** 4-5ì‹œê°„
**ì¼ì¹˜ë„:** 95%+ ì˜ˆìƒ

---

## 6. ìµœì¢… ê²€ì¦

ê²€ìˆ˜ ì™„ë£Œ í›„ ë°ì´í„° í’ˆì§ˆ ê²€ì¦:

```bash
python scripts/validate_data.py --input data/final_labeled.csv
```

í™•ì¸ í•­ëª©:
- í´ë˜ìŠ¤ ë¶„í¬ ê· í˜•
- ê²°ì¸¡ì¹˜ ì—†ìŒ
- ë ˆì´ë¸” ê°’ ìœ íš¨ì„± (0, 1, 2ë§Œ)
- ì¤‘ë³µ ì œê±°

---

## 7. ì›Œí¬í”Œë¡œìš° ìš”ì•½

```
1. ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘ (6000ê°œ)
   â””â”€> data/unlabeled_6000.csv

2. ìë™ ë¼ë²¨ë§ (Gemini/ChatGPT)
   â””â”€> data/auto_labeled_6000.csv
       (ì‹ ë¢°ë„, ê·¼ê±° í¬í•¨)

3. ê²€ìˆ˜ ëŒ€ìƒ í•„í„°ë§
   â”œâ”€> ì‹ ë¢°ë„ < 0.7: 500ê°œ
   â”œâ”€> API ë¶ˆì¼ì¹˜: 300ê°œ
   â””â”€> ë¬´ì‘ìœ„: 200ê°œ
       â””â”€> ì´ ê²€ìˆ˜: 600-1000ê°œ

4. ëŒ€í™”í˜• ê²€ìˆ˜
   â””â”€> data/reviewed.csv

5. ìµœì¢… ê²€ì¦
   â””â”€> python scripts/validate_data.py

6. í•™ìŠµ ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ! ğŸ‰
   â””â”€> Colab ë…¸íŠ¸ë¶ìœ¼ë¡œ ëª¨ë¸ í•™ìŠµ
```

---

## 8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### API í‚¤ ì˜¤ë¥˜
```
âŒ OpenAI API ì˜¤ë¥˜: Incorrect API key provided
```
â†’ API í‚¤ í™•ì¸ (sk-ë¡œ ì‹œì‘í•˜ëŠ”ì§€)

### Rate Limit ì˜¤ë¥˜
```
âŒ Rate limit exceeded
```
â†’ `--save-interval`ì„ ëŠ˜ë¦¬ê±°ë‚˜ ì‹œê°„ ê°„ê²©ì„ ë‘ê³  ì¬ì‹¤í–‰

### ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨
```
âš ï¸  ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨: ...
```
â†’ LLMì´ JSON í˜•ì‹ìœ¼ë¡œ ë‹µë³€ ì•ˆí•¨ (ìë™ìœ¼ë¡œ ìˆ«ìë§Œ ì¶”ì¶œ ì‹œë„)

---

## 9. ë‹¤ìŒ ë‹¨ê³„

ìë™ ë¼ë²¨ë§ + ê²€ìˆ˜ ì™„ë£Œ í›„:

1. **ë°ì´í„° ê²€ì¦**
   ```bash
   python scripts/validate_data.py --input data/final_labeled.csv
   ```

2. **í•™ìŠµ/ê²€ì¦/í…ŒìŠ¤íŠ¸ ë¶„í• **
   - Colab ë…¸íŠ¸ë¶ì—ì„œ ìë™ìœ¼ë¡œ ë¶„í•  (70/10/20)

3. **ëª¨ë¸ í•™ìŠµ**
   - `notebooks/stance_training.ipynb` ì‹¤í–‰
   - ëª©í‘œ ì •í™•ë„: 75-85%

4. **AI ì„œë²„ í†µí•©**
   - í•™ìŠµëœ ëª¨ë¸ì„ `saved_models/`ì— ì €ì¥
   - FastAPI ì„œë²„ì—ì„œ ë¡œë“œ

---

## ğŸ’¡ Pro Tips

1. **Gemini ë¬´ë£Œ í• ë‹¹ëŸ‰ í™œìš©**
   - ì²˜ìŒì—” Gemini ë¬´ë£Œë¡œ ì‹œì‘
   - ë¶€ì¡±í•˜ë©´ ChatGPT ì¶”ê°€

2. **ë°°ì¹˜ ì²˜ë¦¬**
   - 1000ê°œì”© ë‚˜ëˆ ì„œ ë¼ë²¨ë§
   - ì¤‘ê°„ ì €ì¥ìœ¼ë¡œ ì•ˆì „ì„± í™•ë³´

3. **íŒ€ ë¶„ë‹´**
   - ê²€ìˆ˜ ì‘ì—…ì„ íŒ€ì›ë“¤ì´ ë‚˜ëˆ ì„œ
   - Excel/Google Sheetsë¡œ ê³µìœ  ê°€ëŠ¥

4. **í’ˆì§ˆ vs ì†ë„**
   - MVP: Geminië§Œ + ìµœì†Œ ê²€ìˆ˜
   - Production: Both + ì² ì €í•œ ê²€ìˆ˜

---

**ë¬¸ì˜:** ë¬¸ì œ ë°œìƒ ì‹œ íŒ€ ì±„ë„ì— ê³µìœ í•˜ì„¸ìš”!
